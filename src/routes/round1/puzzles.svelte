<script lang="ts">
	import Card, {Content, Actions} from '@smui/card';
	import ClueTable from '../../components/ClueTable.svelte';
	import Button, { Label } from '@smui/button';
	import Drawer, {AppContent, Content, Header, Title} from '@smui/drawer';
	import List, { Item, Text, Graphic } from '@smui/list';

	let activePuzzle = -1
	let activeSection = 0
	const iconurls = [0,1,2,3,4,5].map(x => `./round1/puzzleicon${x+1}.png`)

	const sectionTitles = ['‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', '‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤', '‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö']

	var puzzleTitles = [0,1,2,3,4].map(x => `‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${x+1}`)
	puzzleTitles = [... puzzleTitles, `‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏Ç‡πâ‡∏≠‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢`]
	const puzzles = [
		[
			'‡∏´‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏õ‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏∞‡πÄ‡∏• ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 5 ‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏à‡∏∞‡∏°‡∏µ 1 ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡πÑ‡∏ü',
			'‡∏ô‡∏≥‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏õ‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á 5 ‡∏Å‡∏•‡∏∏‡πà‡∏° ‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡∏ô‡∏≤‡∏î 5x5 ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Tetris) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô',
			'‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÑ‡∏ü ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ 5 ‡∏ï‡∏±‡∏ß ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ö‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á'
		],
		[
			'‡∏´‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏õ‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 0,1,2 ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß üí£? ‡πÇ‡∏ú‡∏•‡πà‡∏Ç‡∏µ‡πâ‡∏ô‡∏°‡∏≤',
			'‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡∏ô‡∏≤‡∏î 5x5 ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡∏° Minesweeper ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏ß‡πà‡∏≤‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î 5 ‡∏•‡∏π‡∏Å‡∏ô‡∏±‡πâ‡∏ô ‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á ? ‡∏ä‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô',
			'‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ 5 ‡∏ï‡∏±‡∏ß ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ã‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤'
		],
		[
			'‡∏´‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏ö‡πÄ‡∏ü‡∏¥‡∏£‡πå‡∏ô 5 ‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏à‡∏∞‡∏°‡∏µ‡πÉ‡∏ö‡πÄ‡∏ü‡∏¥‡∏£‡πå‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô',
			'‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏° ‡∏à‡∏∞‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏∂‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏ô‡∏ó‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏µ‡∏≠‡∏µ‡πÇ‡∏°‡∏à‡∏¥‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏ß‡πà‡∏≤‡πÅ‡∏ó‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (‡πÄ‡∏ä‡πà‡∏ô ‚ù§Ô∏è=HEART) ‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏î‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á',
			'‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏µ‡πÇ‡∏°‡∏à‡∏¥ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ 5 ‡∏ï‡∏±‡∏ß ‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ã‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'
		],
		[
			'‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏ 5 ‡∏ï‡∏±‡∏ß',
			'‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á "‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 1: ‡∏°‡∏µ‡∏ä‡∏π‡πâ = #") ‡πÇ‡∏î‡∏¢ # ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç',
			'‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏ ‡πÅ‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ 5 ‡∏ï‡∏±‡∏ß ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ö‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'
		],
		[
			'‡∏´‡∏≤‡∏î‡∏≤‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 5 ‡∏Ñ‡∏π‡πà ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏π‡πà‡∏à‡∏∞‡∏ä‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤‡∏Å‡∏±‡∏ô',
			'‡∏°‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏î‡∏≤‡∏ö‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á 5x5 ‡∏î‡∏≤‡∏ö‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á 5x5',
			'‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏±‡πâ‡∏á 5 ‡∏ä‡πà‡∏≠‡∏á ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ 5 ‡∏ï‡∏±‡∏ß ‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ö‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á'
		],
		[
			'‡∏ô‡∏≥‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠ 1-5 ‡∏°‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á',
			'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠ "‡∏î‡∏π‡πÉ‡∏ï‡πâ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á" ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠ 1-5 ‡πÉ‡∏ä‡πâ‡∏ä‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡πÑ‡∏õ‡∏ö‡πâ‡∏≤‡∏á',
			'‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á ‡∏à‡∏∞‡πÑ‡∏î‡πâ 5 ‡∏ï‡∏±‡∏ß ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ã‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'
		],
	]

	function setActive(act: number){
		activePuzzle = act
		activeSection = 0
	}
</script>

<div class = 'main'>
	<ClueTable/>
	<div class="drawer-container">
		<Drawer>
		  <Header>
			 <Title>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤</Title>
		  </Header>
		  <Content>
			 <List>
				{#each Array(6) as _unused, id}
				<Item
				  href="javascript:void(0)"
				  on:click={() => setActive(id)}
				  activated={activePuzzle === id}
				>
					<Graphic style={`background-image: url(${iconurls[id]})`}/>
					<Text>{puzzleTitles[id]}</Text>
				</Item>
				{/each}
			 </List>
		  </Content>
		</Drawer>
	  
		<AppContent class="app-content">
		  <main class="main-content">
			{#if activePuzzle >= 0}
				<div class="card-display" style='width:100%'>
					<div class="card-container">
						<Card>
							{#each sectionTitles as title, i}
								{#if activeSection >= i}
								<Actions fullBleed>
									<Button on:click={() => activeSection+=(activeSection <= i?1: 0)}>
										<Label><h2>{title}</h2></Label>
										<i class="material-icons" aria-hidden="true">expand_more</i>
									</Button>
								</Actions>
								{/if}
								{#if activeSection > i}
								<Content>{@html puzzles[activePuzzle][i]}</Content>
								{/if}
							{/each}
						</Card>
					</div>
				</div>
			{/if}
		  </main>
		</AppContent>
	</div>
</div>

<style>
	.drawer-container {
	  position: relative;
	  display: flex;
	  height: 400px;
	  border: 1px solid
		 var(--mdc-theme-text-hint-on-background, rgba(0, 0, 0, 0.1));
	  overflow: hidden;
	  z-index: 0;
	}

	.main-content {
    overflow: auto;
    padding: 10px;
    height: 100%;
	 width: clamp(300px, 600px, 600px);
    box-sizing: border-box;
  }
</style>